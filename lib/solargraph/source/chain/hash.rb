# frozen_string_literal: true

module Solargraph
  class Source
    class Chain
      class Hash < Literal
        # @param type [String]
        # @param node [Parser::AST::Node]
        # @param splatted [Boolean]
        def initialize type, node, splatted = false
          super(type, node)
          @splatted = splatted
        end

        def word
          @word ||= "<#{@type}>"
        end

        def resolve _api_map, _name_pin, _locals
          [Pin::ProxyType.anonymous(@complex_type, source: :chain)]
        end

        def splatted?
          @splatted
        end

        protected

        # @sg-ignore Fix "Not enough arguments to Module#protected"
        def equality_fields
          super + [@splatted]
        end
      end
    end
  end
end
